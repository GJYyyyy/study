"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[183],{9353:(t,s,i)=>{i.d(s,{k:()=>e});var a=i(3671);const e={components:{"add-button":a.HS,"custom-list":a.SP,"custom-search":a.Ny},data:()=>({list:[],finished:!1}),async mounted(){this.init()},methods:{async setList(){let t=await this.getList(),{listParams:s}=this;s.last=t.last,this.listParams={...s},this.list=this.formatterList(t.list),t.last||(this.finished=!0)},onPullRefresh(){let{listParams:t}=this;t.last=void 0,this.listParams={...t},this.finished=!1,this.list=[],this.setList()},onSearch(t){let{listParams:s}=this;s.last=void 0,s.keyword=t,this.listParams={...s},this.finished=!1,this.list=[],this.setList()},async onListLoad(){let t=await this.getList(),{listParams:s}=this;s.last=t.last,this.listParams={...s},this.list=this.list.concat(this.formatterList(t.list)),t.last||(this.finished=!0)}}}},7869:(t,s,i)=>{i.r(s),i.d(s,{default:()=>o});var a=function(){var t=this,s=t._self._c;return s("div",[s("add-button",{attrs:{path:"/addMajor"}}),t._v(" "),s("custom-list",{attrs:{list:t.list,finished:t.finished,"child-list-path":"/listSubject","update-path":"/updateMajor"},on:{delete:t.onDelete,refresh:t.onPullRefresh,load:t.onListLoad}}),t._v(" "),s("custom-search",{on:{search:t.onSearch}})],1)};a._withStripped=!0;var e=i(9353),l=i(2996);const h={mixins:[e.k],data:()=>({listParams:{keyword:"",pageSize:20,last:void 0}}),methods:{async getList(){return await l.Z.listMajor(this.listParams)},init(){let{listParams:t}=this;t.keyword="",t.last=void 0,this.listParams={...t},this.list=[],this.finished=!1,this.setList()},formatterList:t=>t?.map((t=>({...t,_title:t.title,_code:t.code,title:t.code?`${t.title}(${t.code})`:t.title,id:t.major_id}))),onDelete(t){l.Z.deleteMajor([t]).then((()=>{this.$toast.success({message:"删除成功",onClose:()=>this.init()})}))}}},o=(0,i(1900).Z)(h,a,[],!1,null,null,null).exports}}]);