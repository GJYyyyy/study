"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[907],{8907:(t,e,a)=>{a.r(e),a.d(e,{default:()=>u});var i=function(){var t=this,e=t._self._c;return e("div",[e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{label:"科目",value:t.currentSubjectTitle}}),t._v(" "),e("van-field",{attrs:{label:"父目录",readonly:"",value:t.parent?.title??"无"}}),t._v(" "),e("van-field",{attrs:{name:"目录名",label:"目录名",placeholder:"目录名",rules:[{required:!0,message:"请填写目录名"}]},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}}),t._v(" "),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info",size:"small","native-type":"submit"}},[t._v("提交")])],1)],1)],1)};i._withStripped=!0;var l=a(2996),r=a(1241);const s="knowledge_catalog_id",n="subject_id",d="parent_id",o={data:()=>({formData:{title:"",[d]:"null",[n]:""},currentSubjectTitle:"",parent:{}}),computed:{[n](){return this.$route.query.cate_id||this.$store.state.userInfo[n]},[d](){return this.$route.query.parent_id}},async mounted(){this.formData[n]=this[n];let t=await l.Z.detailSubject(this[n],{fields:["title","code"]});if(this.currentSubjectTitle=t.data.code?`${t.data.title}(${t.data.code})`:t.data.title,this.parent_id){let t=await l.Z.detailKnowledgeCatalog(this.parent_id,{fields:["title",s]});if(t.data?.[s]){let{formData:e}=this;e.parent_id=t.data[s],this.formData={...e}}this.parent=t.data}},methods:{onSubmit(){let t={...this.formData};l.Z.addKnowledgeCatalog((0,r.mG)(t)).then((()=>{this.$toast.success({message:"添加成功",onClose:()=>this.$router.back()})}))}}},u=(0,a(1900).Z)(o,i,[],!1,null,null,null).exports}}]);