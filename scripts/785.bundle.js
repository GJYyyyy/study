"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[785],{1785:(t,s,i)=>{i.r(s),i.d(s,{default:()=>n});var e=function(){var t=this,s=t._self._c;return s("div",[s("add-button",{attrs:{path:"/mobile/addSubject",query:t.addtionQuery}}),t._v(" "),s("custom-list",{attrs:{list:t.list,finished:t.finished,"child-list-path":"/mobile/listKnowledgeCatalog","update-path":"/mobile/updateSubject","delete-path":"deleteSubject"},on:{refresh:t.onPullRefresh,load:t.onListLoad}}),t._v(" "),s("custom-search",{on:{search:t.onSearch}})],1)};e._withStripped=!0;var a=i(6869),l=i(4148);const o={components:{"add-button":a.HS,"custom-list":a.SP,"custom-search":a.Ny},computed:{major_id(){return this.$route.query.cate_id||this.$store.state.userInfo.major_id},addtionQuery(){return{cate_id:this.major_id}}},data:()=>({list:[],filterOptions:{key:"",cate_id:""},pageOptions:{pageSize:15,last:null},total:0,finished:!1}),mounted(){let{filterOptions:t}=this;t.cate_id=this.major_id,this.setList()},methods:{async getList(){return await l.Z.listSubject({filterOptions:this.filterOptions,pageOptions:this.pageOptions})},async setList(){let t=await this.getList(),{pageOptions:s}=this;s.last=t.last,this.pageOptions={...s},this.total=t.total,this.list=this.formatterList(t.list),t.last||(this.finished=!0),0===t.list?.length&&t.last&&this.setList()},formatterList:t=>t?.map((t=>({...t,_title:t.title,_code:t.code,title:t.code?`${t.title}(${t.code})`:t.title,id:t.subject_id}))),onPullRefresh(){let{pageOptions:t}=this;t.last=null,this.pageOptions={...t},this.finished=!1,this.list=[],this.setList()},onSearch(t){let{pageOptions:s,filterOptions:i}=this;s.last=null,i.key=t,this.pageOptions={...s},this.filterOptions={...i},this.finished=!1,this.list=[],this.setList()},async onListLoad(){let t=await this.getList(),{pageOptions:s}=this;s.last=t.last,this.pageOptions={...s},this.total=t.total,this.list=this.list.concat(this.formatterList(t.list)),t.last||(this.finished=!0)}}},n=(0,i(1900).Z)(o,e,[],!1,null,null,null).exports}}]);