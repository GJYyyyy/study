"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[735],{7735:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var a=function(){var e=this,t=e._self._c;return t("div",[t("van-form",{on:{submit:e.onSubmit}},[t("van-field",{attrs:{label:"知识点目录",readonly:"",value:e.currentKnowledgeCatalogTitle}}),e._v(" "),t("van-field",{attrs:{name:"标题",label:"标题",placeholder:"标题",rules:[{required:!0,message:"请填写标题"}]},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}}),e._v(" "),t("van-field",{attrs:{label:"内容",readonly:""}}),e._v(" "),e.defaultContent?t("custome-markdown-editor",{attrs:{value:e.defaultContent},on:{change:e.onMarkdownChange,save:e.onMarkdownSave}}):e._e(),e._v(" "),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{attrs:{round:"",block:"",type:"info",size:"small","native-type":"submit"}},[e._v("提交")])],1)],1),e._v(" "),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{attrs:{round:"",block:"",type:"danger",size:"small"},on:{click:e.onDeleteKnowledge}},[e._v("删除")])],1)],1)};a._withStripped=!0;var o=n(2996),l=n(1241),s=n(3485);const d="knowledge_catalog_id",i={components:{"custome-markdown-editor":s.NW},data:()=>({formData:{title:"",content:""},defaultContent:"",currentKnowledgeCatalogTitle:""}),computed:{knowledge_id(){return this.$route.query.id}},async mounted(){let e=await o.Z.detailKnowledge(this.knowledge_id,{fields:["title","content",d]}),t=decodeURIComponent(e.data.content)||" ",{formData:n}=this;n.title=e.data.title,n.content=t,this.formData={...n},this.defaultContent=t;let a=await o.Z.detailKnowledgeCatalog(e.data[d],{fields:["title"]});this.currentKnowledgeCatalogTitle=a.data.title},methods:{onSubmit(){let e={...this.formData};e.content=encodeURIComponent(e.content),o.Z.updateKnowledge(this.knowledge_id,(0,l.mG)(e)).then((()=>{this.$toast.success({message:"更新成功",onClose:()=>this.$router.back()})}))},onDeleteKnowledge(){this.$dialog.confirm({message:"确认删除"}).then((()=>{o.Z.deleteKnowledge([this.knowledge_id]).then((()=>{this.$toast.success({message:"删除成功",onClose:()=>this.$router.back()})}))}))},onMarkdownChange(e){let{formData:t}=this;t.content=e},onMarkdownSave(e){let t={...this.formData};t.content=encodeURIComponent(e),o.Z.updateKnowledge(this.knowledge_id,(0,l.mG)(t)).then((()=>{this.$toast.success({message:"保存成功"})}))}}},r=(0,n(1900).Z)(i,a,[],!1,null,null,null).exports}}]);