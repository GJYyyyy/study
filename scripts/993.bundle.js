"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[993],{9353:(t,s,i)=>{i.d(s,{k:()=>a});var e=i(3671);const a={components:{"add-button":e.HS,"custom-list":e.SP,"custom-search":e.Ny},data:()=>({list:[],finished:!1}),async mounted(){this.init()},methods:{async setList(){let t=await this.getList(),{listParams:s}=this;s.last=t.last,this.listParams={...s},this.list=this.formatterList(t.list),t.last||(this.finished=!0)},onPullRefresh(){let{listParams:t}=this;t.last=void 0,this.listParams={...t},this.finished=!1,this.list=[],this.setList()},onSearch(t){let{listParams:s}=this;s.last=void 0,s.keyword=t,this.listParams={...s},this.finished=!1,this.list=[],this.setList()},async onListLoad(){let t=await this.getList(),{listParams:s}=this;s.last=t.last,this.listParams={...s},this.list=this.list.concat(this.formatterList(t.list)),t.last||(this.finished=!0)}}}},1993:(t,s,i)=>{i.r(s),i.d(s,{default:()=>h});var e=function(){var t=this,s=t._self._c;return s("div",[s("add-button",{attrs:{path:"/addKnowledge",query:t.addtionQuery}}),t._v(" "),s("custom-list-head",{attrs:{title:"知识点目录",value:t.cateTitle}}),t._v(" "),s("custom-list",{attrs:{list:t.list,finished:t.finished,"detail-path":"/detailKnowledge","update-path":"/updateKnowledge","collection-key":"knowledge_collection_id"},on:{delete:t.onDelete,refresh:t.onPullRefresh,load:t.onListLoad,collection:t.onCollection,uncollection:t.onUnCollection}}),t._v(" "),s("custom-search",{on:{search:t.onSearch}})],1)};e._withStripped=!0;var a=i(9353),l=i(3671),o=i(2996);const n="knowledge_catalog_id",d={mixins:[a.k],components:{"custom-list-head":l.K4},computed:{[n](){return this.$route.query.cate_id||this.$store.state.userInfo[n]},addtionQuery(){return{cate_id:this[n]}}},data:()=>({cateTitle:"",listParams:{keyword:"",pageSize:20,last:void 0,equalFields:{[n]:""}}}),methods:{async getList(){return await o.Z.listKnowledge(this.listParams)},async init(){let t=await o.Z.detailKnowledgeCatalog(this[n],{needFields:["title"]});this.cateTitle=t.data.title;let{listParams:s}=this;s.equalFields[n]=this[n],s.keyword="",s.last=void 0,this.listParams={...s},this.list=[],this.finished=!1,this.setList()},formatterList:t=>t?.map((t=>({...t,id:t.knowledge_id}))),onDelete(t){o.Z.deleteKnowledge([t]).then((()=>{this.$toast.success({message:"删除成功",onClose:()=>this.init()})}))},async onCollection(t){await o.Z.addKnowledgeCollection({knowledge_id:t}),this.$toast.success("收藏成功"),this.init()},async onUnCollection(t){await o.Z.deleteKnowledgeCollection([t]),this.$toast.success("取消收藏成功"),this.init()}}},h=(0,i(1900).Z)(d,e,[],!1,null,null,null).exports}}]);