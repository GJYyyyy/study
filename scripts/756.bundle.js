"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[756],{9756:(t,e,a)=>{a.r(e),a.d(e,{default:()=>d});var n=function(){var t=this,e=t._self._c;return e("div",[e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{label:"知识点目录",readonly:"",value:t.currentKnowledgeCatalogTitle}}),t._v(" "),e("van-field",{attrs:{name:"标题",label:"标题",placeholder:"标题",rules:[{required:!0,message:"请填写标题"}]},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}}),t._v(" "),e("van-field",{attrs:{label:"内容",readonly:""}}),t._v(" "),e("custome-markdown-editor",{on:{change:t.onMarkdownChange,save:t.onMarkdownSave}}),t._v(" "),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info",size:"small","native-type":"submit"}},[t._v("提交")])],1)],1)],1)};n._withStripped=!0;var o=a(2996),l=a(1241),s=a(3485);const r="knowledge_catalog_id",i={components:{"custome-markdown-editor":s.NW},data:()=>({formData:{title:"",content:"",[r]:""},currentKnowledgeCatalogTitle:""}),computed:{[r](){return this.$route.query.cate_id||this.$store.state.userInfo[r]}},async mounted(){this.formData[r]=this[r];let t=await o.Z.detailKnowledgeCatalog(this[r],{fields:["title"]});this.currentKnowledgeCatalogTitle=t.data.title},methods:{onSubmit(){let t={...this.formData};t.content=encodeURIComponent(t.content),o.Z.addKnowledge((0,l.mG)(t)).then((()=>{this.$toast.success({message:"添加成功",onClose:()=>this.$router.back()})}))},onMarkdownChange(t){let{formData:e}=this;e.content=t},onMarkdownSave(t){let e={...this.formData};e.content=encodeURIComponent(t),o.Z.addKnowledge((0,l.mG)(e)).then((()=>{this.$toast.success({message:"保存成功",onClose:()=>this.$router.back()})}))}}},d=(0,a(1900).Z)(i,n,[],!1,null,null,null).exports}}]);