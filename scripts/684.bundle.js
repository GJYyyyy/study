"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[684],{8684:(t,s,i)=>{i.r(s),i.d(s,{default:()=>h});var e=function(){var t=this,s=t._self._c;return s("div",[s("add-button",{attrs:{path:"/mobile/addMajor"}}),t._v(" "),s("custom-list",{attrs:{list:t.list,finished:t.finished,"child-list-path":"/mobile/listSubject","update-path":"/mobile/updateMajor","delete-path":"deleteMajor"},on:{refresh:t.onPullRefresh,load:t.onListLoad}}),t._v(" "),s("custom-search",{on:{search:t.onSearch}})],1)};e._withStripped=!0;var a=i(63),l=i(4148);const o={components:{"add-button":a.HS,"custom-list":a.SP,"custom-search":a.Ny},data:()=>({list:[],filterOptions:{key:""},pageOptions:{pageSize:15,last:null},total:0,finished:!1}),async mounted(){this.setList()},methods:{async getList(){return await l.Z.listMajor({filterOptions:this.filterOptions,pageOptions:this.pageOptions})},async setList(){let t=await this.getList(),{pageOptions:s}=this;s.last=t.last,this.pageOptions={...s},this.total=t.total,this.list=this.formatterList(t.list),t.last||(this.finished=!0),0===t.list?.length&&t.last&&this.setList()},formatterList:t=>t?.map((t=>({...t,_title:t.title,_code:t.code,title:t.code?`${t.title}(${t.code})`:t.title,id:t.major_id}))),onPullRefresh(){let{pageOptions:t}=this;t.last=null,this.pageOptions={...t},this.finished=!1,this.list=[],this.setList()},onSearch(t){let{pageOptions:s,filterOptions:i}=this;s.last=null,i.key=t,this.pageOptions={...s},this.filterOptions={...i},this.finished=!1,this.list=[],this.setList()},async onListLoad(){let t=await this.getList(),{pageOptions:s}=this;s.last=t.last,this.pageOptions={...s},this.total=t.total,this.list=this.list.concat(this.formatterList(t.list)),t.last||(this.finished=!0)}}},h=(0,i(1900).Z)(o,e,[],!1,null,null,null).exports}}]);