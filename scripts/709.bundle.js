(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[709],{2111:(e,t,s)=>{"use strict";s.d(t,{Z:()=>$});var n=s(6161),i=s(6278),o=s(5680),a=s(8017),r=s(8159),l=s(1406),d=s(1241);let u=0;function c(e){let t=(0,l.MD5)(e.baseURL+e.url+e.method+JSON.stringify(e.params)+("object"==typeof e.data?JSON.stringify(e.data):e.data)).toString();return e.url+"/"+t}let g=0;const m=()=>{g&&clearTimeout(g),g=setTimeout((()=>{r.Z.commit("hidePageLoading")}),200)},p=m;let h="";h="https://cdc6cwbft6ld3qffubzgvckasy0ysvbj.lambda-url.us-east-1.on.aws";const v=n.Z.create({baseURL:"https://cdc6cwbft6ld3qffubzgvckasy0ysvbj.lambda-url.us-east-1.on.aws/api",timeout:1e4});v.interceptors.request.use((e=>{e.headers.setContentType("text/plain;charset=UTF-8");let t=(0,a.LP)();return e.headers.Authorization="Bearer "+t,r.Z.commit("showPageLoading"),(e=>{u||(u=setTimeout((()=>{r.Z.commit("clearCache"),u=0}),18e5));let t=c(e),s=new Map([["knowledgeCollection",new Set(["knowledgeCollection","knowledge"])]]);if(new RegExp(`/(${["add","update","delete"].join("|")})`).test(e.url)){let e=/\/\w+\/\w+\//.exec(t)[0].replace(/(^\/|\/$)/g,"").split("/")[0];s.has(e)?s.get(e).forEach((e=>r.Z.commit("removeCache",e))):r.Z.commit("removeCache",e)}let n=r.Z.state.cache[t];return n?Promise.reject(n):e})(e)}),(e=>(o.Z.fail({message:e.message}),Promise.reject(e)))),v.interceptors.response.use((e=>(m(),(e=>{let t={...e},s=(0,d.aJ)(t),n=c(s.config);r.Z.commit("addCache",{[n]:s})})(e),e.data.data)),(e=>{if(p(),e instanceof Error){let t=e.response;return t?401===t.status?o.Z.fail({message:t.statusText,onClose:()=>i.Z.push("/mobile/login")}):t.data.message?o.Z.fail({message:t.data.message}):o.Z.fail({message:t.statusText}):o.Z.fail({message:e.message}),Promise.reject(e)}return t=e,Promise.resolve(t.data.data);var t}));const f=v,w=function(e,t={}){let s="/"+e,n=e.replace(/^\w/,e[0].toUpperCase()),i={["add"+n]:e=>f.post(s+"/add",e),["delete"+n]:e=>f.post(s+"/delete",{ids:e}),["update"+n]:(e,t)=>f.post(s+"/update/"+e,t),["detail"+n]:(e,t)=>f.post(s+"/detail/"+e,t),["list"+n]:e=>f.post(s+"/list",e)};return Object.assign({},i,t)},b="user",_=(b.replace(/^\w/,b[0].toUpperCase()),w(b,{userRegister:e=>f.post("/user/register",e),getUserInfo:e=>f.get("/user/getUserInfo/"+e),userLogin:e=>f.post("/user/login",e)})),C="major",k=C.replace(/^\w/,C[0].toUpperCase()),x=w(C,{["listNoPage"+k]:e=>f.post("/major/listNoPage",e)}),y="subject",L=y.replace(/^\w/,y[0].toUpperCase()),q=w(y,{["listNoPage"+L]:e=>f.post("/subject/listNoPage",e)}),I="knowledgeCatalog",P=I.replace(/^\w/,I[0].toUpperCase()),j=w(I,{["deleteTree"+P]:e=>f.post("/knowledgeCatalog/deleteTree",{ids:e}),["listNoPage"+P]:e=>f.post("/knowledgeCatalog/listNoPage",e),["listTree"+P]:e=>f.post("/knowledgeCatalog/listTree",e)}),S="knowledge",A=S.replace(/^\w/,S[0].toUpperCase()),Z=w(S,{["listNoPage"+A]:e=>f.post("/knowledge/listNoPage",e),["listRandom"+A]:e=>f.post("/knowledge/listRandom",e)}),T="knowledgeCollection",U=T.replace(/^\w/,T[0].toUpperCase()),$={..._,...x,...q,...j,...Z,...w(T,{["list"+U]:e=>f.post("/knowledgeCollection/list",e),["listNoPage"+U]:e=>f.post("/knowledgeCollection/listNoPage",e)})}},8017:(e,t,s)=>{"use strict";function n(e=!1){e=Boolean(e);let t=window.localStorage,s=window.sessionStorage,n=e?t:s;return{get:e=>n.getItem(e),set:(e,i)=>{t.removeItem(e),s.removeItem(e),n.setItem(e,i)},remove:e=>{t.removeItem(e),s.removeItem(e)},clear:()=>{t.clear(),s.clear()}}}function i(e,t=!1){n(!0).set("rememberMe",t),n(t).set("token",e)}function o(){let e="true"===n(!0).get("rememberMe");return n(e).get("token")}function a(){let e="true"===n(!0).get("rememberMe");n(e).remove("token")}s.d(t,{LP:()=>o,gy:()=>a,o4:()=>i})},1241:(e,t,s)=>{"use strict";function n(e){for(let t in e)e[t]=e[t].toString().trim();return e}function i(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],s=!1,n=0;n<t.length;n++)if(e.indexOf(t[n])>0){s=!0;break}var i=window.screen.width,o=window.screen.height;return i>325&&o<750&&(s=!0),s}function o(e){return`${e.getFullYear()}-${("0"+e.getMonth()).substr(-2)}-${("0"+e.getDate()).substr(-2)} ${("0"+e.getHours()).substr(-2)}:${("0"+e.getMinutes()).substr(-2)}:${("0"+e.getSeconds()).substr(-2)}`}function a(e){let t;if(e instanceof Array)t=e.map((e=>a(e)));else if(e instanceof Set){t=new Set;for(let s of e)t.add(a(s))}else if(e instanceof Map){t=new Map;for(let[s,n]of e)t.set(a(s),a(n))}else if(e instanceof Object){t={};for(let s in e)t[s]=a(e[s])}else t=e;return t}s.d(t,{_n:()=>r,_t:()=>o,aJ:()=>a,mG:()=>n,tq:()=>i});const r=async(e,t=300,s=1,n="base64")=>{let i=new Image;return i.src=URL.createObjectURL(e),new Promise(((e,o)=>{i.onload=function(){let i=this.width,o=this.height,a=i/o,r=0,l=0;i>t||o>t?i>o?(r=t,l=r/a):(l=t,r=l*a):(r=i,l=o);let d=document.createElement("canvas"),u=d.getContext("2d"),c=document.createAttribute("width"),g=document.createAttribute("height");c.nodeValue=r,g.nodeValue=l,d.setAttributeNode(c),d.setAttributeNode(g),u.drawImage(this,0,0,r,l);let m=d.toDataURL("image/jpeg",s);if("base64"===n)e(m);else if("file"===n){let t=((e,t="")=>{for(var s=e.split(","),n=s[0].match(/:(.*?);/)[1],i=atob(s[1]),o=i.length,a=new Uint8Array(o);o--;)a[o]=i.charCodeAt(o);if(n){var r=n.split("/");""===t&&(t="file."+r[1])}return new File([a],t,{type:n})})(m,"img.jpg");e(t)}}}))}},9986:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var n=s(6738),i=s.n(n),o=s(7705),a=s.n(o)()(i());a.push([e.id,"\n.custom-markdown-editor[data-v-534b5638] .v-note-wrapper {\n    z-index: initial;\n}\n",""]);const r=a},3010:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var n=s(6738),i=s.n(n),o=s(7705),a=s.n(o)()(i());a.push([e.id,"\n.random-qa[data-v-2d117264] {\n    padding: 16px;\n}\n.random-qa .rate[data-v-2d117264] {\n    margin-bottom: 12px;\n}\n.random-qa .subject > b[data-v-2d117264],\n.random-qa .question > b[data-v-2d117264],\n.random-qa .answer > b[data-v-2d117264] {\n    display: block;\n    margin-bottom: 4px;\n}\n.random-qa .show-right-answer-btn[data-v-2d117264] {\n    margin-bottom: 16px;\n}\n.random-qa .answer > textarea[data-v-2d117264] {\n    resize: none;\n    width: 100%;\n    height: 100px;\n    padding: 8px;\n    box-sizing: border-box;\n    border-color: var(--gray-3);\n    border-radius: 4px;\n}\n.random-qa .right-answer[data-v-2d117264] {\n    padding: 8px;\n    box-sizing: border-box;\n    max-height: 70vh;\n    overflow-y: auto;\n}\n",""]);const r=a},2568:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d,e:()=>r});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"custom-markdown-editor"},[t("mavon-editor",{ref:"md",attrs:{value:e.value,boxShadow:!1,html:!1,xssOptions:!1,toolbars:e.toolbars,subfield:e.subfield,defaultOpen:e.defaultOpen,toolbarsBackground:"var(--primary-color)",previewBackground:"var(--primary-color)",imageFilter:e.imgFilter},on:{fullScreen:e.onEditorFullScreen,save:e.onContentSave,change:e.onContentChange,imgAdd:e.onEditorImgAdd}})],1)};n._withStripped=!0;var i=s(1241),o=s(966);s(1226);let a=0;const r=o.mavonEditor.getMarkdownIt(),l={components:{"mavon-editor":o.mavonEditor},props:{value:{type:String,default:""}},data:()=>({toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0},subfield:!0,defaultOpen:"preview"}),mounted(){this.toolbars.imagelink=!1,this.toolbars.trash=!1,(0,i.tq)()&&(this.toolbars.readmodel=!1,this.toolbars.subfield=!1,this.subfield=!1,this.defaultOpen="edit")},methods:{onContentChange(e,t){a&&clearTimeout(a),a=setTimeout((()=>{this.$emit("change",e)}),200)},onEditorFullScreen(e){document.querySelector(".v-note-wrapper").style.zIndex=e?1500:"initial"},downloadFile(e,t){let s=document.createElement("a");s.href="data:text/plain;charset=utf-8,"+t,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s)},onContentSave(e,t){this.downloadFile("source.html",t)},imgFilter(e){return!!/^image/.test(e.type)||(this.$toast.fail("请选择图片文件"),!1)},async onEditorImgAdd(e,t){let s=await(0,i._n)(t);this.$refs.md.$img2Url(e,s)}}};s(7891);const d=(0,s(1900).Z)(l,n,[],!1,null,"534b5638",null).exports},6354:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"random-qa"},[e.questionList.length?t("div",[t("div",{staticClass:"subject"},[t("b",[e._v("科目：")]),e._v(" "),t("p",[e._v(e._s(e.subjectTitle))])]),e._v(" "),t("van-divider"),e._v(" "),t("div",[t("div",{staticClass:"question"},[t("b",[e._v("问：")]),e._v(" "),t("p",[e._v(e._s(e.currentQuestion?.title))])]),e._v(" "),t("van-divider"),e._v(" "),t("div",{staticClass:"answer"},[t("b",[e._v("答：")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.answer,expression:"answer"}],domProps:{value:e.answer},on:{input:function(t){t.target.composing||(e.answer=t.target.value)}}})]),e._v(" "),t("van-divider"),e._v(" "),t("div",{staticClass:"show-right-answer-btn row-center"},[t("van-button",{attrs:{size:"small",type:"danger",block:""},on:{click:e.onToggleAnswerShow}},[e._v(e._s(e.rightAnswerVisible?"隐藏答案":"显示答案"))])],1),e._v(" "),t("van-dialog",{attrs:{width:"90%",title:"查看答案"},model:{value:e.rightAnswerVisible,callback:function(t){e.rightAnswerVisible=t},expression:"rightAnswerVisible"}},[t("div",{staticClass:"right-answer"},[t("div",{domProps:{innerHTML:e._s(e.currentQuestion?.content)}})])])],1),e._v(" "),t("div",{staticClass:"row-between col-center"},[t("van-button",{attrs:{size:"small",type:"info"},on:{click:e.onClickPrevBtn}},[e._v("上一题")]),e._v(" "),t("span",[e._v(e._s(e.rate))]),e._v(" "),t("van-button",{attrs:{size:"small",type:"info"},on:{click:e.onClickNextBtn}},[e._v("下一题")])],1)],1):t("van-empty",{attrs:{description:"当前科目下没有知识点"}})],1)};n._withStripped=!0;var i=s(2111),o=s(2568);const a={data:()=>({questionList:[],currentQuestionListIndex:0,rightAnswerVisible:!1,subjectTitle:"",answer:""}),computed:{userInfo(){return this.$store.state.userInfo},rate(){return 0===this.questionList.length?"0 / 0":`${this.currentQuestionListIndex+1} / ${this.questionList.length}`},currentQuestion:{get:function(){return this.questionList[this.currentQuestionListIndex]},set:function(e){this.questionList[this.currentQuestionListIndex]=e,this.questionList=[...this.questionList]}}},mounted(){this.init()},methods:{async init(){let e=await i.Z.detailSubject(this.userInfo.subject_id,{fields:["title","code"]});this.subjectTitle=e.data.code?`${e.data.title}(${e.data.code})`:e.data.title;let t=await i.Z.listRandomKnowledge({limit:10,filter:{subject_id:this.userInfo.subject_id}});this.questionList=this.formatterList(t.list)},formatterList:e=>e,async onToggleAnswerShow(){if(await this.$dialog.confirm({message:"确认显示答案？"}),this.rightAnswerVisible=!this.rightAnswerVisible,this.rightAnswerVisible){let e=await i.Z.detailKnowledge(this.currentQuestion.knowledge_id,{fields:["content"]});this.currentQuestion.content=o.e.render(decodeURIComponent(e.data.content)),this.currentQuestion={...this.currentQuestion}}},onClickNextBtn(){this.currentQuestionListIndex>=this.questionList.length-1||this.currentQuestionListIndex++},onClickPrevBtn(){this.currentQuestionListIndex<=0||this.currentQuestionListIndex--}}};s(6752);const r=(0,s(1900).Z)(a,n,[],!1,null,"2d117264",null).exports},7891:(e,t,s)=>{var n=s(9986);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var i=(0,s(4023).Z)("8e7470aa",n,!1,{});n.locals||e.hot.accept(9986,(function(){var t=s(9986);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.id,t,""]]),i(t)})),e.hot.dispose((function(){i()}))},6752:(e,t,s)=>{var n=s(3010);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var i=(0,s(4023).Z)("36f4c6e6",n,!1,{});n.locals||e.hot.accept(3010,(function(){var t=s(3010);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.id,t,""]]),i(t)})),e.hot.dispose((function(){i()}))},2480:()=>{}}]);