(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[575],{6418:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(6161),o=r(6278),a=r(5680),s=r(8017),i=r(8159),c=r(1406),l=r(1241);let d=0;function u(e){let t=(0,c.MD5)(e.baseURL+e.url+e.method+JSON.stringify(e.params)+("object"==typeof e.data?JSON.stringify(e.data):e.data)).toString();return e.url+"/"+t}let g=0;const p=()=>{g&&clearTimeout(g),g=setTimeout((()=>{i.Z.commit("hidePageLoading")}),200)},m=p;let w="";w="https://cdc6cwbft6ld3qffubzgvckasy0ysvbj.lambda-url.us-east-1.on.aws";const f=n.Z.create({baseURL:"https://cdc6cwbft6ld3qffubzgvckasy0ysvbj.lambda-url.us-east-1.on.aws/api",timeout:1e4});f.interceptors.request.use((e=>{e.headers.setContentType("text/plain;charset=UTF-8");let t=(0,s.LP)();return e.headers.Authorization="Bearer "+t,i.Z.commit("showPageLoading"),(e=>{d||(d=setTimeout((()=>{i.Z.commit("clearCache"),d=0}),18e5));let t=u(e),r=new Map([["knowledgeCollection",new Set(["knowledgeCollection","knowledge"])]]);if(new RegExp(`/(${["add","update","delete"].join("|")})`).test(e.url)){let e=/\/\w+\/\w+\//.exec(t)[0].replace(/(^\/|\/$)/g,"").split("/")[0];r.has(e)?r.get(e).forEach((e=>i.Z.commit("removeCache",e))):i.Z.commit("removeCache",e)}let n=i.Z.state.cache[t];return n?Promise.reject(n):e})(e)}),(e=>(a.Z.fail({message:e.message}),Promise.reject(e)))),f.interceptors.response.use((e=>(p(),(e=>{let t={...e},r=(0,l.aJ)(t),n=u(r.config);i.Z.commit("addCache",{[n]:r})})(e),e.data.data)),(e=>{if(m(),e instanceof Error){let t=e.response;return t?401===t.status?a.Z.fail({message:t.statusText,onClose:()=>o.Z.push("/login")}):t.data.message?a.Z.fail({message:t.data.message}):a.Z.fail({message:t.statusText}):a.Z.fail({message:e.message}),Promise.reject(e)}return t=e,Promise.resolve(t.data.data);var t}));const h=f,v=function(e,t={}){let r="/"+e,n=e.replace(/^\w/,e[0].toUpperCase()),o={["add"+n]:e=>h.post(r+"/add",e),["delete"+n]:e=>h.post(r+"/delete",{ids:e}),["update"+n]:(e,t)=>h.post(r+"/update/"+e,t),["detail"+n]:(e,t)=>h.post(r+"/detail/"+e,t),["list"+n]:e=>h.post(r+"/list",e)};return Object.assign({},o,t)},A="user",C=(A.replace(/^\w/,A[0].toUpperCase()),v(A,{userRegister:e=>h.post("/user/register",e),getUserInfo:e=>h.get("/user/getUserInfo/"+e),userLogin:e=>h.post("/user/login",e)})),b="major",k=b.replace(/^\w/,b[0].toUpperCase()),y=v(b,{["listNoPage"+k]:e=>h.post("/major/listNoPage",e)}),P="subject",x=P.replace(/^\w/,P[0].toUpperCase()),Z=v(P,{["listNoPage"+x]:e=>h.post("/subject/listNoPage",e)}),_="knowledgeCatalog",U=_.replace(/^\w/,_[0].toUpperCase()),j=v(_,{["deleteTree"+U]:e=>h.post("/knowledgeCatalog/deleteTree",{ids:e}),["listNoPage"+U]:e=>h.post("/knowledgeCatalog/listNoPage",e),["listTree"+U]:e=>h.post("/knowledgeCatalog/listTree",e)}),N="knowledge",R=N.replace(/^\w/,N[0].toUpperCase()),S=v(N,{["listNoPage"+R]:e=>h.post("/knowledge/listNoPage",e),["listRandom"+R]:e=>h.post("/knowledge/listRandom",e)}),T="knowledgeCollection",L=T.replace(/^\w/,T[0].toUpperCase()),M=v(T,{["list"+L]:e=>h.post("/knowledgeCollection/list",e),["listNoPage"+L]:e=>h.post("/knowledgeCollection/listNoPage",e)}),I="knowledgeRandomQA",$=I.replace(/^\w/,I[0].toUpperCase()),O={...C,...y,...Z,...j,...S,...M,...v(I,{["listNoPage"+$]:e=>h.post("/knowledgeRandomQA/listNoPage",e),["detailAnswerAccuracy"+$]:()=>h.get("/knowledgeRandomQA/detailAnswerAccuracy")})}},8017:(e,t,r)=>{"use strict";function n(e=!1){e=Boolean(e);let t=window.localStorage,r=window.sessionStorage,n=e?t:r;return{get:e=>n.getItem(e),set:(e,o)=>{t.removeItem(e),r.removeItem(e),n.setItem(e,o)},remove:e=>{t.removeItem(e),r.removeItem(e)},clear:()=>{t.clear(),r.clear()}}}function o(e,t=!1){n(!0).set("rememberMe",t),n(t).set("token",e)}function a(){let e="true"===n(!0).get("rememberMe");return n(e).get("token")}function s(){let e="true"===n(!0).get("rememberMe");n(e).remove("token")}r.d(t,{LP:()=>a,gy:()=>s,o4:()=>o})},1241:(e,t,r)=>{"use strict";function n(e){for(let t in e)e[t]=e[t].toString().trim();return e}function o(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],r=!1,n=0;n<t.length;n++)if(e.indexOf(t[n])>0){r=!0;break}var o=window.screen.width,a=window.screen.height;return o>325&&a<750&&(r=!0),r}function a(e){return`${e.getFullYear()}-${("0"+e.getMonth()).substr(-2)}-${("0"+e.getDate()).substr(-2)} ${("0"+e.getHours()).substr(-2)}:${("0"+e.getMinutes()).substr(-2)}:${("0"+e.getSeconds()).substr(-2)}`}function s(e){let t;if(e instanceof Array)t=e.map((e=>s(e)));else if(e instanceof Set){t=new Set;for(let r of e)t.add(s(r))}else if(e instanceof Map){t=new Map;for(let[r,n]of e)t.set(s(r),s(n))}else if(e instanceof Object){t={};for(let r in e)t[r]=s(e[r])}else t=e;return t}r.d(t,{_n:()=>i,_t:()=>a,aJ:()=>s,mG:()=>n,tq:()=>o});const i=async(e,t=300,r=1,n="base64")=>{let o=new Image;return o.src=URL.createObjectURL(e),new Promise(((e,a)=>{o.onload=function(){let o=this.width,a=this.height,s=o/a,i=0,c=0;o>t||a>t?o>a?(i=t,c=i/s):(c=t,i=c*s):(i=o,c=a);let l=document.createElement("canvas"),d=l.getContext("2d"),u=document.createAttribute("width"),g=document.createAttribute("height");u.nodeValue=i,g.nodeValue=c,l.setAttributeNode(u),l.setAttributeNode(g),d.drawImage(this,0,0,i,c);let p=l.toDataURL("image/jpeg",r);if("base64"===n)e(p);else if("file"===n){let t=((e,t="")=>{for(var r=e.split(","),n=r[0].match(/:(.*?);/)[1],o=atob(r[1]),a=o.length,s=new Uint8Array(a);a--;)s[a]=o.charCodeAt(a);if(n){var i=n.split("/");""===t&&(t="file."+i[1])}return new File([s],t,{type:n})})(p,"img.jpg");e(t)}}}))}},1546:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(6738),o=r.n(n),a=r(7705),s=r.n(a)()(o());s.push([e.id,"\n.home .van-icon[data-v-1e6c4ef7] {\n    margin-bottom: 4px;\n}\n.home .current-answer[data-v-1e6c4ef7] {\n    padding: 48px 16px 16px;\n}\n.home .inner-circle[data-v-1e6c4ef7] {\n    height: 100%;\n    font-size: 16px;\n    color: var(--gray-3);\n}\n",""]);const i=s},6679:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("van-grid",{attrs:{"column-num":3}},e._l(e.navList,(function(r,n){return t("van-grid-item",{key:n,on:{click:()=>e.onGridClick(r.path)}},[r.icon?t("van-icon",{attrs:{name:r.icon,color:r.iconColor,size:"30"}}):e._e(),e._v(" "),t("span",[e._v(e._s(r.title))])],1)})),1),e._v(" "),t("div",{staticClass:"current-answer"},[t("div",{staticClass:"row-center"},[t("div",{on:{click:()=>e.onGridClick("/knowledgeRandomQA")}},[t("van-circle",{attrs:{size:"200px","stroke-width":"60",color:e.currentAnswerColor},model:{value:e.currentAnswerAccuracy,callback:function(t){e.currentAnswerAccuracy=t},expression:"currentAnswerAccuracy"}},[[t("div",{staticClass:"inner-circle full-center"},[e._v(e._s(e.currentAnswerText))])]],2)],1)])])],1)};n._withStripped=!0;var o=r(6418);const a={data:()=>({navList:[{title:"随机问答",icon:"play-circle",iconColor:"var(--blue)",path:"/knowledgeRandomQA"},{title:"错题本",icon:"cross",iconColor:"var(--red)",path:"/listKnowledgeWrong"},{title:"我的收藏",icon:"label",iconColor:"var(--green)",path:"/listKnowledgeCollection"}],currentAnswerAccuracy:-1}),computed:{currentAnswerText(){return-1===this.currentAnswerAccuracy?"今日还未答题":`正确率：${this.currentAnswerAccuracy}%`},currentAnswerColor(){return-1===this.currentAnswerAccuracy?"var(--red)":this.currentAnswerAccuracy<60?"var(--yellow)":"var(--green)"}},async mounted(){let e=await o.Z.detailAnswerAccuracyKnowledgeRandomQA();this.currentAnswerAccuracy=e.data?.answer_accuracy??-1,console.debug(this.currentAnswerAccuracy)},methods:{onGridClick(e){this.$router.push({path:e})}}};r(8509);const s=(0,r(1900).Z)(a,n,[],!1,null,"1e6c4ef7",null).exports},8509:(e,t,r)=>{var n=r(1546);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);var o=(0,r(4023).Z)("316fe08c",n,!1,{});n.locals||e.hot.accept(1546,(function(){var t=r(1546);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.id,t,""]]),o(t)})),e.hot.dispose((function(){o()}))},2480:()=>{}}]);