(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[33],{2111:(e,t,n)=>{"use strict";n.d(t,{Z:()=>$});var s=n(6161),i=n(6278),a=n(5680),o=n(8017),r=n(8159),l=n(1406),d=n(1241);let u=0;function c(e){let t=(0,l.MD5)(e.baseURL+e.url+e.method+JSON.stringify(e.params)+("object"==typeof e.data?JSON.stringify(e.data):e.data)).toString();return e.url+"/"+t}let g=0;const m=()=>{g&&clearTimeout(g),g=setTimeout((()=>{r.Z.commit("hidePageLoading")}),200)},p=m;let h="";h="https://cdc6cwbft6ld3qffubzgvckasy0ysvbj.lambda-url.us-east-1.on.aws";const v=s.Z.create({baseURL:"https://cdc6cwbft6ld3qffubzgvckasy0ysvbj.lambda-url.us-east-1.on.aws/api",timeout:1e4});v.interceptors.request.use((e=>{e.headers.setContentType("text/plain;charset=UTF-8");let t=(0,o.LP)();return e.headers.Authorization="Bearer "+t,r.Z.commit("showPageLoading"),(e=>{u||(u=setTimeout((()=>{r.Z.commit("clearCache"),u=0}),18e5));let t=c(e),n=new Map([["knowledgeCollection",new Set(["knowledgeCollection","knowledge"])]]);if(new RegExp(`/(${["add","update","delete"].join("|")})`).test(e.url)){let e=/\/\w+\/\w+\//.exec(t)[0].replace(/(^\/|\/$)/g,"").split("/")[0];n.has(e)?n.get(e).forEach((e=>r.Z.commit("removeCache",e))):r.Z.commit("removeCache",e)}let s=r.Z.state.cache[t];return s?Promise.reject(s):e})(e)}),(e=>(a.Z.fail({message:e.message}),Promise.reject(e)))),v.interceptors.response.use((e=>(m(),(e=>{let t={...e},n=(0,d.aJ)(t),s=c(n.config);r.Z.commit("addCache",{[s]:n})})(e),e.data.data)),(e=>{if(p(),e instanceof Error){let t=e.response;return t?401===t.status?a.Z.fail({message:t.statusText,onClose:()=>i.Z.push("/login")}):t.data.message?a.Z.fail({message:t.data.message}):a.Z.fail({message:t.statusText}):a.Z.fail({message:e.message}),Promise.reject(e)}return t=e,Promise.resolve(t.data.data);var t}));const f=v,w=function(e,t={}){let n="/"+e,s=e.replace(/^\w/,e[0].toUpperCase()),i={["add"+s]:e=>f.post(n+"/add",e),["delete"+s]:e=>f.post(n+"/delete",{ids:e}),["update"+s]:(e,t)=>f.post(n+"/update/"+e,t),["detail"+s]:(e,t)=>f.post(n+"/detail/"+e,t),["list"+s]:e=>f.post(n+"/list",e)};return Object.assign({},i,t)},b="user",_=(b.replace(/^\w/,b[0].toUpperCase()),w(b,{userRegister:e=>f.post("/user/register",e),getUserInfo:e=>f.get("/user/getUserInfo/"+e),userLogin:e=>f.post("/user/login",e)})),C="major",k=C.replace(/^\w/,C[0].toUpperCase()),x=w(C,{["listNoPage"+k]:e=>f.post("/major/listNoPage",e)}),y="subject",L=y.replace(/^\w/,y[0].toUpperCase()),q=w(y,{["listNoPage"+L]:e=>f.post("/subject/listNoPage",e)}),I="knowledgeCatalog",P=I.replace(/^\w/,I[0].toUpperCase()),j=w(I,{["deleteTree"+P]:e=>f.post("/knowledgeCatalog/deleteTree",{ids:e}),["listNoPage"+P]:e=>f.post("/knowledgeCatalog/listNoPage",e),["listTree"+P]:e=>f.post("/knowledgeCatalog/listTree",e)}),S="knowledge",A=S.replace(/^\w/,S[0].toUpperCase()),Z=w(S,{["listNoPage"+A]:e=>f.post("/knowledge/listNoPage",e),["listRandom"+A]:e=>f.post("/knowledge/listRandom",e)}),T="knowledgeCollection",U=T.replace(/^\w/,T[0].toUpperCase()),$={..._,...x,...q,...j,...Z,...w(T,{["list"+U]:e=>f.post("/knowledgeCollection/list",e),["listNoPage"+U]:e=>f.post("/knowledgeCollection/listNoPage",e)})}},8017:(e,t,n)=>{"use strict";function s(e=!1){e=Boolean(e);let t=window.localStorage,n=window.sessionStorage,s=e?t:n;return{get:e=>s.getItem(e),set:(e,i)=>{t.removeItem(e),n.removeItem(e),s.setItem(e,i)},remove:e=>{t.removeItem(e),n.removeItem(e)},clear:()=>{t.clear(),n.clear()}}}function i(e,t=!1){s(!0).set("rememberMe",t),s(t).set("token",e)}function a(){let e="true"===s(!0).get("rememberMe");return s(e).get("token")}function o(){let e="true"===s(!0).get("rememberMe");s(e).remove("token")}n.d(t,{LP:()=>a,gy:()=>o,o4:()=>i})},1241:(e,t,n)=>{"use strict";function s(e){for(let t in e)e[t]=e[t].toString().trim();return e}function i(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!1,s=0;s<t.length;s++)if(e.indexOf(t[s])>0){n=!0;break}var i=window.screen.width,a=window.screen.height;return i>325&&a<750&&(n=!0),n}function a(e){return`${e.getFullYear()}-${("0"+e.getMonth()).substr(-2)}-${("0"+e.getDate()).substr(-2)} ${("0"+e.getHours()).substr(-2)}:${("0"+e.getMinutes()).substr(-2)}:${("0"+e.getSeconds()).substr(-2)}`}function o(e){let t;if(e instanceof Array)t=e.map((e=>o(e)));else if(e instanceof Set){t=new Set;for(let n of e)t.add(o(n))}else if(e instanceof Map){t=new Map;for(let[n,s]of e)t.set(o(n),o(s))}else if(e instanceof Object){t={};for(let n in e)t[n]=o(e[n])}else t=e;return t}n.d(t,{_n:()=>r,_t:()=>a,aJ:()=>o,mG:()=>s,tq:()=>i});const r=async(e,t=300,n=1,s="base64")=>{let i=new Image;return i.src=URL.createObjectURL(e),new Promise(((e,a)=>{i.onload=function(){let i=this.width,a=this.height,o=i/a,r=0,l=0;i>t||a>t?i>a?(r=t,l=r/o):(l=t,r=l*o):(r=i,l=a);let d=document.createElement("canvas"),u=d.getContext("2d"),c=document.createAttribute("width"),g=document.createAttribute("height");c.nodeValue=r,g.nodeValue=l,d.setAttributeNode(c),d.setAttributeNode(g),u.drawImage(this,0,0,r,l);let m=d.toDataURL("image/jpeg",n);if("base64"===s)e(m);else if("file"===s){let t=((e,t="")=>{for(var n=e.split(","),s=n[0].match(/:(.*?);/)[1],i=atob(n[1]),a=i.length,o=new Uint8Array(a);a--;)o[a]=i.charCodeAt(a);if(s){var r=s.split("/");""===t&&(t="file."+r[1])}return new File([o],t,{type:s})})(m,"img.jpg");e(t)}}}))}},9986:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var s=n(6738),i=n.n(s),a=n(7705),o=n.n(a)()(i());o.push([e.id,"\n.custom-markdown-editor[data-v-534b5638] .v-note-wrapper {\n    z-index: initial;\n}\n",""]);const r=o},2186:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var s=n(6738),i=n.n(s),a=n(7705),o=n.n(a)()(i());o.push([e.id,"\n.random-qa[data-v-7d1e834a] {\n    padding: 16px;\n}\n.random-qa .rate[data-v-7d1e834a] {\n    margin-bottom: 12px;\n}\n.random-qa .subject > b[data-v-7d1e834a],\n.random-qa .question > b[data-v-7d1e834a],\n.random-qa .answer > b[data-v-7d1e834a] {\n    display: block;\n    margin-bottom: 4px;\n}\n.random-qa .show-right-answer-btn[data-v-7d1e834a] {\n    margin-bottom: 16px;\n}\n.random-qa .answer > textarea[data-v-7d1e834a] {\n    resize: none;\n    width: 100%;\n    height: 100px;\n    padding: 8px;\n    box-sizing: border-box;\n    border-color: var(--gray-3);\n    border-radius: 4px;\n}\n.random-qa .right-answer[data-v-7d1e834a] {\n    padding: 8px;\n    box-sizing: border-box;\n    max-height: 80vh;\n    overflow-y: auto;\n}\n.random-qa[data-v-7d1e834a] .van-dialog {\n    top: 50%;\n}\n",""]);const r=o},2568:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d,e:()=>r});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"custom-markdown-editor"},[t("mavon-editor",{ref:"md",attrs:{value:e.value,boxShadow:!1,html:!1,xssOptions:!1,toolbars:e.toolbars,subfield:e.subfield,defaultOpen:e.defaultOpen,toolbarsBackground:"var(--primary-color)",previewBackground:"var(--primary-color)",imageFilter:e.imgFilter},on:{fullScreen:e.onEditorFullScreen,save:e.onContentSave,change:e.onContentChange,imgAdd:e.onEditorImgAdd}})],1)};s._withStripped=!0;var i=n(1241),a=n(966);n(1226);let o=0;const r=a.mavonEditor.getMarkdownIt(),l={components:{"mavon-editor":a.mavonEditor},props:{value:{type:String,default:""}},data:()=>({toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0},subfield:!0,defaultOpen:"preview"}),mounted(){this.toolbars.imagelink=!1,this.toolbars.trash=!1,(0,i.tq)()&&(this.toolbars.readmodel=!1,this.toolbars.subfield=!1,this.subfield=!1,this.defaultOpen="edit")},methods:{onContentChange(e,t){o&&clearTimeout(o),o=setTimeout((()=>{this.$emit("change",e)}),200)},onEditorFullScreen(e){document.querySelector(".v-note-wrapper").style.zIndex=e?1500:"initial"},downloadFile(e,t){let n=document.createElement("a");n.href="data:text/plain;charset=utf-8,"+t,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)},onContentSave(e,t){this.downloadFile("source.html",t)},imgFilter(e){return!!/^image/.test(e.type)||(this.$toast.fail("请选择图片文件"),!1)},async onEditorImgAdd(e,t){let n=await(0,i._n)(t);this.$refs.md.$img2Url(e,n)}}};n(7891);const d=(0,n(1900).Z)(l,s,[],!1,null,"534b5638",null).exports},226:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"random-qa"},[e.questionList.length?t("div",[t("div",{staticClass:"subject"},[t("b",[e._v("科目：")]),e._v(" "),t("p",[e._v(e._s(e.subjectTitle))])]),e._v(" "),t("van-divider"),e._v(" "),t("div",[t("div",{staticClass:"question"},[t("b",[e._v("问：")]),e._v(" "),t("p",[e._v(e._s(e.currentQuestion?.title))])]),e._v(" "),t("van-divider"),e._v(" "),t("div",{staticClass:"answer"},[t("b",[e._v("答：")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.answer,expression:"answer"}],domProps:{value:e.answer},on:{input:function(t){t.target.composing||(e.answer=t.target.value)}}})]),e._v(" "),t("van-divider"),e._v(" "),t("div",{staticClass:"show-right-answer-btn row-center"},[t("van-button",{attrs:{size:"small",type:"danger",block:""},on:{click:e.onToggleAnswerShow}},[e._v(e._s(e.rightAnswerVisible?"隐藏答案":"显示答案"))])],1),e._v(" "),t("van-dialog",{attrs:{width:"90%",title:"查看答案"},model:{value:e.rightAnswerVisible,callback:function(t){e.rightAnswerVisible=t},expression:"rightAnswerVisible"}},[t("div",{staticClass:"right-answer"},[t("div",{domProps:{innerHTML:e._s(e.currentQuestion?.content)}})])])],1),e._v(" "),t("div",{staticClass:"row-between col-center"},[t("van-button",{attrs:{size:"small",type:"info"},on:{click:e.onClickPrevBtn}},[e._v("上一题")]),e._v(" "),t("span",[e._v(e._s(e.rate))]),e._v(" "),t("van-button",{attrs:{size:"small",type:"info"},on:{click:e.onClickNextBtn}},[e._v("下一题")])],1)],1):t("van-empty",{attrs:{description:"当前科目下没有知识点"}})],1)};s._withStripped=!0;var i=n(2111),a=n(2568);const o={data:()=>({questionList:[],currentQuestionListIndex:0,rightAnswerVisible:!1,subjectTitle:"",answer:""}),computed:{userInfo(){return this.$store.state.userInfo},rate(){return 0===this.questionList.length?"0 / 0":`${this.currentQuestionListIndex+1} / ${this.questionList.length}`},currentQuestion:{get:function(){return this.questionList[this.currentQuestionListIndex]},set:function(e){this.questionList[this.currentQuestionListIndex]=e,this.questionList=[...this.questionList]}}},mounted(){this.init()},methods:{async init(){let e=await i.Z.detailSubject(this.userInfo.subject_id,{needFields:["title","code"]});this.subjectTitle=e.data.code?`${e.data.title}(${e.data.code})`:e.data.title;let t=await i.Z.listRandomKnowledge({randomLimit:15,equalFields:{subject_id:this.userInfo.subject_id}});this.questionList=this.formatterList(t.list)},formatterList:e=>e,async onToggleAnswerShow(){if(await this.$dialog.confirm({message:"确认显示答案？"}),this.rightAnswerVisible=!this.rightAnswerVisible,this.rightAnswerVisible){let e=await i.Z.detailKnowledge(this.currentQuestion.knowledge_id,{needFields:["content"]});this.currentQuestion.content=a.e.render(decodeURIComponent(e.data.content)),this.currentQuestion={...this.currentQuestion}}},onClickNextBtn(){this.currentQuestionListIndex>=this.questionList.length-1||this.currentQuestionListIndex++},onClickPrevBtn(){this.currentQuestionListIndex<=0||this.currentQuestionListIndex--}}};n(3732);const r=(0,n(1900).Z)(o,s,[],!1,null,"7d1e834a",null).exports},7891:(e,t,n)=>{var s=n(9986);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var i=(0,n(4023).Z)("8e7470aa",s,!1,{});s.locals||e.hot.accept(9986,(function(){var t=n(9986);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.id,t,""]]),i(t)})),e.hot.dispose((function(){i()}))},3732:(e,t,n)=>{var s=n(2186);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var i=(0,n(4023).Z)("aedc3422",s,!1,{});s.locals||e.hot.accept(2186,(function(){var t=n(2186);t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.id,t,""]]),i(t)})),e.hot.dispose((function(){i()}))},2480:()=>{}}]);