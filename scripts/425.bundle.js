(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[425],{7854:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var i=n(6738),s=n.n(i),o=n(7705),a=n.n(o)()(s());a.push([t.id,"\n.custom-markdown-editor[data-v-3cdc7248] .v-note-wrapper {\n    z-index: initial;\n}\n",""]);const r=a},8265:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var i=n(6738),s=n.n(i),o=n(7705),a=n.n(o)()(s());a.push([t.id,"\n.random-qa[data-v-16041c7e] {\n    padding: 16px;\n    margin-bottom: 16px;\n}\n.random-qa .rate[data-v-16041c7e] {\n    margin-bottom: 12px;\n}\n.random-qa .subject > b[data-v-16041c7e],\n.random-qa .question > b[data-v-16041c7e],\n.random-qa .answer > b[data-v-16041c7e] {\n    display: block;\n    margin-bottom: 4px;\n}\n.random-qa .toggle-question[data-v-16041c7e] {\n    margin-top: 16px;\n}\n.random-qa .submit-question[data-v-16041c7e] {\n    margin-top: 16px;\n}\n.random-qa .answer > textarea[data-v-16041c7e] {\n    resize: none;\n    width: 100%;\n    height: 100px;\n    padding: 8px;\n    box-sizing: border-box;\n    border-color: var(--gray-3);\n    border-radius: 4px;\n}\n.random-qa .right-answer[data-v-16041c7e] {\n    padding: 8px;\n    box-sizing: border-box;\n    max-height: 80vh;\n    overflow-y: auto;\n}\n.random-qa[data-v-16041c7e] .van-dialog {\n    top: 50%;\n}\n",""]);const r=a},4635:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l,e:()=>r});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"custom-markdown-editor"},[e("mavon-editor",{ref:"md",attrs:{value:t.value,boxShadow:!1,html:!1,xssOptions:!1,toolbars:t.toolbars,subfield:t.subfield,defaultOpen:t.defaultOpen,toolbarsBackground:"var(--primary-color)",previewBackground:"var(--primary-color)",imageFilter:t.imgFilter,externalLink:t.externalLink},on:{fullScreen:t.onEditorFullScreen,save:t.onContentSave,change:t.onContentChange,imgAdd:t.onEditorImgAdd}})],1)};i._withStripped=!0;var s=n(1241),o=n(966);n(1226);let a=0;const r=o.mavonEditor.getMarkdownIt(),d={components:{"mavon-editor":o.mavonEditor},props:{value:{type:String,default:""}},data:()=>({toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0},externalLink:{markdown_css:function(){return"/mavon-editor/markdown/github-markdown.min.css"},hljs_js:function(){return"/mavon-editor/highlightjs/highlight.min.js"},hljs_css:function(t){return"/mavon-editor/highlightjs/styles/"+t+".min.css"},hljs_lang:function(t){return"/mavon-editor/highlightjs/languages/"+t+".min.js"},katex_css:function(){return"/mavon-editor/katex/katex.min.css"},katex_js:function(){return"/mavon-editor/katex/katex.min.js"}},subfield:!0,defaultOpen:"preview"}),mounted(){this.toolbars.imagelink=!1,this.toolbars.trash=!1,(0,s.tq)()&&(this.toolbars.readmodel=!1,this.toolbars.subfield=!1,this.subfield=!1,this.defaultOpen="edit")},methods:{onContentChange(t,e){a&&clearTimeout(a),a=setTimeout((()=>{this.$emit("change",t)}),200)},onEditorFullScreen(t){document.querySelector(".v-note-wrapper").style.zIndex=t?1500:"initial"},downloadFile(t,e){let n=document.createElement("a");n.href="data:text/plain;charset=utf-8,"+e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)},onContentSave(t,e){this.downloadFile("source.html",e)},imgFilter(t){return!!/^image/.test(t.type)||(this.$toast.fail("请选择图片文件"),!1)},async onEditorImgAdd(t,e){let n=await(0,s._n)(e);this.$refs.md.$img2Url(t,n)}}};n(8046);const l=(0,n(1900).Z)(d,i,[],!1,null,"3cdc7248",null).exports},9425:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>d});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"random-qa"},[t.questionList.length?e("div",[e("div",{staticClass:"subject"},[e("b",[t._v("科目：")]),t._v(" "),e("p",[t._v(t._s(t.subjectTitle))])]),t._v(" "),e("van-divider"),t._v(" "),e("div",[e("div",{staticClass:"question"},[e("b",[t._v("问：")]),t._v(" "),e("p",[t._v(t._s(t.currentQuestion?.title))])]),t._v(" "),e("van-divider"),t._v(" "),e("div",{staticClass:"answer"},[e("b",[t._v("答：")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.answer,expression:"answer"}],domProps:{value:t.answer},on:{input:function(e){e.target.composing||(t.answer=e.target.value)}}})]),t._v(" "),e("van-divider"),t._v(" "),e("div",{staticClass:"show-right-answer-btn row-center"},[e("van-button",{attrs:{size:"small",type:"danger",block:""},on:{click:t.onToggleAnswerShow}},[t._v("显示答案（标记错题）")])],1),t._v(" "),e("van-dialog",{attrs:{width:"90%",title:"答案"},model:{value:t.rightAnswerVisible,callback:function(e){t.rightAnswerVisible=e},expression:"rightAnswerVisible"}},[e("div",{staticClass:"right-answer"},[e("div",{domProps:{innerHTML:t._s(t.currentQuestion?.content)}})])])],1),t._v(" "),e("div",{staticClass:"row-between col-center toggle-question"},[e("van-button",{attrs:{size:"small",type:"info"},on:{click:t.onClickPrevBtn}},[t._v("上一题")]),t._v(" "),e("span",[t._v(t._s(t.rate))]),t._v(" "),e("van-button",{attrs:{size:"small",type:"info"},on:{click:t.onClickNextBtn}},[t._v("下一题")])],1),t._v(" "),e("div",{staticClass:"submit-question"},[e("van-button",{attrs:{block:"",size:"small",type:"primary"},on:{click:t.onClickSubmit}},[t._v("提交")])],1)],1):e("van-empty",{attrs:{description:"当前科目下没有知识点"}})],1)};i._withStripped=!0;var s=n(2996),o=n(4635);const a="knowledge_random_qa_id",r={data:()=>({[a]:"",questionList:[],currentQuestionListIndex:0,rightAnswerVisible:!1,subjectTitle:"",answer:""}),computed:{userInfo(){return this.$store.state.userInfo},rate(){return 0===this.questionList.length?"0 / 0":`${this.currentQuestionListIndex+1} / ${this.questionList.length}`},currentQuestion:{get:function(){return this.questionList[this.currentQuestionListIndex]},set:function(t){this.questionList[this.currentQuestionListIndex]=t}}},mounted(){this.init()},methods:{async init(){if(!this.userInfo.subject_id)return void this.$toast.fail({message:"请先选择科目",onClose:()=>{this.$router.push("/userInfo")}});let t=await s.Z.detailSubject(this.userInfo.subject_id,{needFields:["title","code"]});this.subjectTitle=t.data.code?`${t.data.title}(${t.data.code})`:t.data.title;let e=await s.Z.listRandomKnowledge({randomLimit:15,equalFields:{subject_id:this.userInfo.subject_id}});this[a]=e[a],this.questionList=this.formatterList(e.list)},formatterList:t=>t.map((t=>({...t,_wrong:!1}))),async onToggleAnswerShow(){await this.$dialog.confirm({message:"确认显示答案？"}),this.rightAnswerVisible=!0,this.currentQuestion._wrong=!0,s.Z.addKnowledgeWrong({knowledge_id:this.currentQuestion.knowledge_id});let t=await s.Z.detailKnowledge(this.currentQuestion.knowledge_id,{needFields:["content"]});this.currentQuestion.content=o.e.render(decodeURIComponent(t.data.content))},onClickNextBtn(){this.currentQuestionListIndex>=this.questionList.length-1||this.currentQuestionListIndex++},onClickPrevBtn(){this.currentQuestionListIndex<=0||this.currentQuestionListIndex--},async onClickSubmit(){await this.$dialog.confirm({message:"确认提交今日答题？"}),await s.Z.updateKnowledgeRandomQA(this[a],{wrong_knowledge_ids:this.questionList.filter((t=>t._wrong)).map((t=>t.knowledge_id))}),this.$toast.success({message:"提交成功",onClose:()=>{this.$router.push("/home")}})}}};n(2157);const d=(0,n(1900).Z)(r,i,[],!1,null,"16041c7e",null).exports},8046:(t,e,n)=>{var i=n(7854);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=(0,n(4023).Z)("22f36a8f",i,!1,{});i.locals||t.hot.accept(7854,(function(){var e=n(7854);e.__esModule&&(e=e.default),"string"==typeof e&&(e=[[t.id,e,""]]),s(e)})),t.hot.dispose((function(){s()}))},2157:(t,e,n)=>{var i=n(8265);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=(0,n(4023).Z)("41dbd32f",i,!1,{});i.locals||t.hot.accept(8265,(function(){var e=n(8265);e.__esModule&&(e=e.default),"string"==typeof e&&(e=[[t.id,e,""]]),s(e)})),t.hot.dispose((function(){s()}))}}]);