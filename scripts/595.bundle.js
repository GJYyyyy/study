"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[595],{2595:(t,e,a)=>{a.r(e),a.d(e,{default:()=>r});var i=function(){var t=this,e=t._self._c;return e("div",[e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{label:"专业",readonly:"",value:t.currentMajorTitle}}),t._v(" "),e("van-field",{attrs:{name:"科目",label:"科目",placeholder:"科目",rules:[{required:!0,message:"请填写科目"}]},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}}),t._v(" "),e("van-field",{attrs:{name:"科目代号",label:"科目代号",placeholder:"科目代号"},model:{value:t.formData.code,callback:function(e){t.$set(t.formData,"code",e)},expression:"formData.code"}}),t._v(" "),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info",size:"small","native-type":"submit"}},[t._v("提交")])],1)],1),t._v(" "),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"danger",size:"small"},on:{click:t.onDeleteSubject}},[t._v("删除")])],1)],1)};i._withStripped=!0;var l=a(2996),o=a(1241);const s={data:()=>({formData:{title:"",code:""},currentMajorTitle:""}),computed:{subject_id(){return this.$route.query.id}},async mounted(){let t=await l.Z.detailSubject(this.subject_id,{fields:["title","code","major_id"]}),{formData:e}=this;e.title=t.data.title,e.code=t.data.code,this.formData={...e};let a=await l.Z.detailMajor(t.data.major_id,{fields:["title","code"]});this.currentMajorTitle=a.data.code?`${a.data.title}(${a.data.code})`:a.data.title},methods:{onSubmit(){let t={...this.formData};l.Z.updateSubject(this.subject_id,(0,o.mG)(t)).then((()=>{this.$toast.success({message:"更新成功",onClose:()=>this.$router.back()})}))},onDeleteSubject(){this.$dialog.confirm({message:"确认删除"}).then((()=>{l.Z.deleteSubject([this.subject_id]).then((()=>{this.$toast.success({message:"删除成功",onClose:()=>this.$router.back()})}))}))}}},r=(0,a(1900).Z)(s,i,[],!1,null,null,null).exports}}]);